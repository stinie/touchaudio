<!DOCTYPE html>
<html manifest="cache.manifest">
<head>
	<title>touchaudio</title>
	<meta http-equiv="content-type" content="text/html; charset=utf-8">

	<!--<link rel="stylesheet" href="css/style.css" type="text/css">-->
	<style>
		#buttons button {
			font-size: xx-large;
			width: 33%;
			height: 100px;
			background-color: lightyellow;
			color: red;
		}
		#buttons button[disabled]:after {
			content: "..."; /* Indicate that the sounds are loading */
		}
		#buttons button[disabled] {
			color: lightgrey;
		}
	</style>
</head>
<body>
	<div id="buttons"></div>
	
	<script type="text/javascript" src="js/embed-kitchensink-android.uncompressed.js"></script>
	<script type="text/javascript">
		// Create
		var audioFiles = [
			"bnimanje", "goworit", "moskva", "sluschaitje",
			"yello-intro", "yello-trumpet", "yello-doit", "yello-ha", "yello-keepon", "yello-snap"
		];
		var extension = navigator.userAgent.match(/Firefox/) ? ".ogg" : ".mp3";
		var buttonsNode = embed.byId("buttons");
		for (var i=0, l=audioFiles.length; i<l; i++){
			var a = embed.create("audio", {src:"audio/"+audioFiles[i]+extension}, embed.body());
			//var b = embed.create("button", {textContent:audioFiles[i], disabled:"disabled"}, buttonsNode);
			var b = embed.create("button", {textContent:audioFiles[i]}, buttonsNode);
			b._id = i;
			embed.on(a, "canplay", (function(b){return function(){ embed.removeAttr(b, "disabled") }})(b));
		}
		
		// Play
		var audioNodes = embed.query("audio");
		embed.on(buttonsNode, "click", function(evt){
			var a = audioNodes[evt.target._id];
			try{
				a.currentTime = 0; // doenst work on iOS, catch errors
			}catch(){}
			a.play();
		});
	</script>
</body>
</html>
